<!DOCTYPE html>
<!-- html5_006 : WTE micro template -->

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hello world Sentry</title>

	<style type="text/css">
		body {
			margin: 40px;
			font-family: "Lucida Sans Unicode", "Lucida Grande", sans-serif;
			color: #333;
		}
	</style>

	<script src="https://cdn.ravenjs.com/3.19.1/raven.min.js" crossorigin="anonymous"></script>

</head>

<p>
	<button id="a">ðŸ’£</button>
</p>

<script>
	console.log("hello world")

	Raven
		.config('https://52f8a7ef91a24f50bd54447e0a120476@sentry.io/233871')
		.install()

	Raven.context(function () {
		document.addEventListener('click', /*Raven.context(*/event => {
			const { target: clickedElement } = event
			if (!clickedElement)
				throw new Error('click event has no target!')

			if (clickedElement.matches(`#a`)) {
				console.log('ðŸ’£ clicked')
				setTimeout(() => {
					throw '[thrown string]' // ðŸ¤• not throwing a proper error!
				})

				setTimeout(() => {
					throw new Error('[thrown error]')
				})

				new Promise((resolve, reject) => {
					setTimeout(() => reject('[rejected string]')) // ðŸ¤• not rejecting with a proper error!
				})

				new Promise((resolve, reject) => {
					setTimeout(() => reject(new Error('[rejected error]')))
				})
			}
		})
	})
</script>
